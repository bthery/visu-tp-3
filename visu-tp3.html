<!-- Visualisation des données : TP3. C.Boukamel-Donnou / B.Thery -->
<html>
<head>
    <meta charset="utf-8">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- D3JS-->
  <script src="https://d3js.org/d3.v4.min.js"></script>

    <style>
        .jumbotron {
            padding: 8px;
        }

        .MyChart a {
            background: #bde572;
            padding: 4px;
            border: 2px;
            border-radius: 8px;
        }

        .MyChart text {
            fill: black;
            font: 10px sans-serif;
            text-anchor: begin;
        }

        .MyTreeMap text {
            fill: white;
            font: 10px sans-serif;
            text-anchor: begin;
        }

        .MyTreeMap rect {
            fill: #4594BF;
            stroke: white;
        }

        div.tooltip {
            position: absolute;
            text-align: left;
            padding: 4px;
            font: 11px sans-serif;
            background: white;
            border: 0px;
            border-radius: 8px;
            pointer-events: none;
        }

        .nav-tabs {
            background-color: #bde572;
        }

    </style>
    <style src="reingold-Tilford.css"></style>
    <title>Visualisation de données 2018-2019 TP3</title>

</head>
<body>
    <div class="container-fluid">

        <div class="jumbotron text-center">
            Mastère Big Data 2018-2019: Visualisation des données TP3</br>
            Cécile Boukamel-Donnou / Benjamin Thery
            <h3>Visualisation d'Arbre</h3>
        </div>

        <ul class="nav nav-tabs">
            <li class="active"><a data-toggle="tab" href="#graph_reingold"><strong>Reingold-Tilford</strong></a></li>
            <li><a data-toggle="tab" href="#graph_treemap" id="treemap_tab"><strong>Treemap</strong></a></li>
        </ul>

        <div class="tab-content">

            <!-- Reingold-Tilford -->
            <div id="graph_reingold" class="tab-pane fade in active">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="row" style="padding: 8px">
                            <!-- Le graphique est inséré ici -->
                            <!--svg class="MyChart" id="ReingoldTilford" style="background-color: #B8B8B8;"-->
                            <canvas width="1000" height="800" id="reingoldTilford"></canvas>
                            <!--/svg-->
                        </div>
                    </div> <!--panel-body-->
                </div>
            </div> <!--tab-pane graphique 1 -->

            <!-- Treemap -->
            <div id="graph_treemap" class="tab-pane fade">
                <div class="panel panel-default">
                    <div class="panel-heading" style="padding: 8px;">
                        <h4><strong>Répertoire courant</strong> : <span id="path_label"></span></h4>
                    </div>
                    <div id="graph_treemap_body" class="panel-body">

                        <div class="btn-group" id="treemap-style-selector">
                            <button type="button" class="btn btn-primary" id="subtree_size_button">Affichage par taille du sous-arbre</button>
                            <button type="button" class="btn btn-primary" id="children_count_button">Affichage par nombre de fichiers du sous-arbre</button>
                        </div>

                        <button type="button" class="btn" id="root_button">Retour à la racine</button>

                        <div class="row" style="padding: 8px;">
                            <!-- Le graphique est inséré ici -->
                            <svg class="MyTreeMap" id="svgtreemap" style="background-color: #F0F0F0;"></svg>
                        </div>
                        <p>Affichage de l'arborescence des sources du noyau Linux sous forme de <strong>treemap.</strong> Seuls les répertoires sont représentés par les boites du treemap pour un soucis de performance.</p>
                        <p>Deux modes de représentation sont possibles pour l'arbre:
                            <ul>
                                <li><strong>par taille</strong>, la taille de boites du treemap est proportionnelle à la place occupée sur le disque par les différents répertoires du sous-arbre.</li>
                                <li><strong>par nombre de fichiers</strong>, la taille de boites du treemap est proportionnelle à nombre de fichiers présents dans le sous-arbre.</li>
                            </ul>
                        </p>
                        <p>Lorsque le pointeur de la souris est déplacé sur une boite, le sous-arbre est mis en valeur et un tooltip affiche différentes informations sur ce sous-arbres (selon le mode d'affichage):
                             <ul>
                                <li>nombres de fichiers dans le répertoire courant et dans son sous-arbre,</li>
                                <li>taille des fichiers du répertoire courant et dans son sous-arbre,</li>
                                <li>pourcentage de l'espace utilisé par le sous-arbre par rapport à l'espace totale de l'arbre affiché (et respectivement pourcentage des fichiers)</li>
                            </ul>
                        </p>
                        <p>Il est possible de zoomer sur un sous-arbre en cliquant dans sa boite pour afficher des données qui ne sont pas forcément visible dans la vue d'ensemble.</p>
                    </div> <!--panel-body-->
                </div> <!--panel-->
            </div> <!--tab-pane graphique 2-->
        </div> <!--tab-content -->
    </div> <!-- container-fluid-->

    <!-- Chargement des scripts pour lire les données et tracer les graphiques -->
    <script src="reingold-Tilford.js"></script>
    <script src="treemap.js"></script>

    <noscript>Vous devez activer JavaScript sur votre navigateur pour voir cette page</noscript>
</body>
</html>
